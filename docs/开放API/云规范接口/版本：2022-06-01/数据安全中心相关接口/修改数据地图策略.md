## 1. 接口描述

修改数据地图策略，私有化调用path为：/capi/DLPOpenApi/ModifyBackendPolicy，从8.6P1版本开始支持

## 2. 输入参数

| 参数名称 | 必选 | 类型 | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------|---------|---------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| PolicyId | 是 | Integer | 策略列表唯一ID(只支持32位)<br/>示例值：1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Name | 是 | String | 策略名称<br/>示例值：办公扫描                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Description | 否 | String | 策略描述<br/>示例值：用于公办设备扫描                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Status | 否 | Integer | 启用状态(只支持32位) 0关闭 1启用<br/>示例值：1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Data | 是 | String | 配置详情:<br/>{     "ScanPosition":0 //扫描位置  0：所有磁盘位置  1:指定磁盘位置     <br/>"ExcludeDirectory":["xxx","xxxxx"]//排除目录     <br/>"IncludeDirectory":["xxxx","xxxx"]//指定目录  ScanPostion=1时，起作用。    <br/> "MinFileSize":1, //单位MB  最小文件大小     <br/>"MaxFileSize":2048,//单位MB 最大文件大小     <br/>"DataLevelList":["S2","S1"], // 分级分类规则 S1-S6大类     <br/>"RuleId":[11,12], //选择具体规则Id     <br/>"FileTypeIds":[11,12] //文件词库id列表	 	<br/>"ScanType":1, "//1:立即扫描;2:定时扫描,3:自助扫描;4:自助+立即;5 自助+定时     <br/>"TimePeriod":[            {              <br/>"Day":[0,6],//周日-周六:0-6  月:1-31              <br/>"Hour":0, //小时开始时间              <br/>"HourEnd":1,//小时结束时间              <br/>"Minute":0, //分钟开始时间              <br/>"MinuteEnd":0,//分钟结束时间              <br/>"Second":0, //秒              <br/>"SecondEnd":59,//秒结束时间              <br/>"TimeType":2 // 1 每天； 2 每周；3 每月              <br/>"Duration":2, //持续时间(天)            }       ]    <br/>"FileScanningSwitch":0, //开启文件扫描阈值  0:否  1是    <br/>"FileScanningThreshold":1000, //文件每分钟扫描阈值    <br/>"LeisureScan":0,//闲时扫描  0:否  1是    <br/>"HitFileReportThreshold": 2000 //命中文件上报阈值    <br/>"CPUUsageLimit": 90 // CPU 占用限制    <br/>"ScanTimeout":  24 //任务超时时间 单位小时    <br/>"FileSuffixType":0  //文件后缀类型  0:所有文件后缀  1指定文件后缀  2.排除文件后缀    <br/>"FileSuffixList":[".txt",".map3",".gradle",".exe"]  //文件后缀列表      <br/>"SystemScan": 1, //系统扫描    <br/>"SelfScan": {       <br/>"Switch": 0, //开启客户端自助检测模块       <br/>"EnableSelfScan": 0, //允许终端用户进行自助扫描       <br/>"EnableSelfScanPath": 0, //允许客户端扫描自行排除或指定目录       <br/>"EnableExport": 0, //允许导出检查报告       <br/>"CPUUsageLimit"：90,       <br/>"ScanTimeout": 48, //扫描超时时间       <br/>"ScanFileThreshold": 2000, //单次任务上报阈值       <br/>"EnableShowScanResult": 0, //检测记录是否展示系统扫描结果       <br/>"EnableMarkFileNonSensitive": 0, //允许终端用户将文件标记为非敏感文件       <br/>"EnableShowFileDetail": 0, //检查结果显示敏感文件命中详情       <br/>"EnableShowFileContent": 0 //检查结果显示命中的关键字文本内容   } }<br/>示例值：{“ScanPosition”:0} |

## 3. 输出参数

| 参数名称 | 类型 | 描述 |
|---------|---------|---------|
| Data | [ModifyBackendPolicyData](/开放API/云规范接口/版本：2022-06-01/数据结构.md#ModifyBackendPolicyData) | 业务响应数据<br/>注意：此字段可能返回 null，表示取不到有效值。|
| RequestId | String | 唯一请求 ID，由服务端生成，每次请求都会返回（若请求因其他原因未能抵达服务端，则该次请求不会获得 RequestId）。定位问题时需要提供该次请求的 RequestId。|

## 4. 示例

### 示例1 修改后台策略

#### 输入示例

```
POST / HTTP/1.1
Host: ioa.tencentcloudapi.com
Content-Type: application/json
X-TC-Action: ModifyBackendPolicy
<公共请求参数>

{
  "Name": "test",
  "Status": 1,
  "Description": "",
  "Data": "{\"ScanPosition\":2,\"ExcludeDirectory\":[\"*\\\\Program Files*\",\"*\\\\ProgramData*\",\"*\\\\Windows*\",\"*\\\\$*\",\"*\\\\Users\\\\*\\\\AppData\\\\Local\\\\Temp*\",\"*\\\\Users\\\\*\\\\.android\",\"*\\\\Users\\\\*\\\\.gradle\",\"/Applications\",\"/Library\",\"/System\",\"/bin\",\"/private\",\"/sbin\",\"/Users/*/Library/Android\",\"/Users/*/.android\",\"/Users/*/.gradle\",\"/Users/*/.cocoapods\",\"/proc\",\"/sys\",\"/dev\",\"/run\",\"/var/run\",\"/var/lock\",\"/lost+found\",\"/boot\"],\"IncludeDirectory\":[],\"MinFileSize\":0,\"MaxFileSize\":1,\"DataLevelList\":[\"S4\"],\"RuleId\":[],\"FileTypeIds\":[56],\"ScanType\":1,\"FileScanningSwitch\":0,\"CPUUsageLimit\":90,\"ScanTimeout\":null,\"FileScanningThreshold\":1000,\"LeisureScan\":0,\"TimePeriod\":[{\"Hour\":0,\"HourEnd\":23,\"Minute\":0,\"MinuteEnd\":59,\"Second\":0,\"SecondEnd\":59}],\"HitFileReportThreshold\":2000,\"FileSuffixType\":0,\"FileSuffixList\":[]}",
  "PolicyId": 49
}
```

#### 输出示例

```json
{
    "Response": {
        "Data": {
            "PolicyId": 49
        },
        "RequestId": "web-3461177967511-1765938455559"
    }
}
```


## 5. 错误码

| 错误码 | 描述 |
|---------|---------|
| FailedOperation.QueryData | 查询数据失败。 |
| InternalError.DatabaseException | 内部错误，数据库异常。 |
| InternalError.DatabaseUpdateFailed | 数据库更新失败。 |
| InternalError.DatabaseWriteFailed | 数据库写入失败。 |
| InternalError.Unknown | 内部未知错误。 |
| InvalidParameter.DuplicatePolicyName | 重复的策略名称。 |
| InvalidParameter.RequestParam | 请求参数错误。 |
| InvalidParameter.VerificationFailed | 参数校验失败。 |
| MissingParameter.CommonParam | 缺少公共参数。 |
| ResourceNotFound.NotFound | 资源不存在。 |
| UnauthorizedOperation.PermissionDenied | 未授权的操作。 |